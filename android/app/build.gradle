plugins {
    id "com.android.application"
    id "kotlin-android"
    // The Flutter Gradle Plugin must be applied after the Android and Kotlin Gradle plugins.
    id "dev.flutter.flutter-gradle-plugin"
}

android {
    namespace = "app.sys.merchant"
    compileSdk = flutter.compileSdkVersion
    ndkVersion = flutter.ndkVersion

    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_1_8
        targetCompatibility = JavaVersion.VERSION_1_8
    }

    kotlinOptions {
        jvmTarget = JavaVersion.VERSION_1_8
    }

    defaultConfig {
        applicationId = "app.sys.merchant" // Updated applicationId
        minSdk = flutter.minSdkVersion
        targetSdk = 34
        versionCode 19 // Updated versionCode
        versionName "1.19" // Updated versionName
    }

    signingConfigs {
        release {
            storeFile file("D:\\Projects\\MMDDKeyStore\\MMDDKeyStoreFile.jks") // Keystore path
            storePassword "MmddJodhpur" // Keystore password
            keyAlias "MMDDKeyStore" // Key alias
            keyPassword "MmddJodhpur" // Key password
        }
    }

    buildTypes {
        release {
            // Reference the signing configuration correctly
            signingConfig signingConfigs.release

            // Enable ProGuard to shrink and obfuscate the code
            minifyEnabled true
            shrinkResources true

            // Use ProGuard rules provided by Flutter
            proguardFiles getDefaultProguardFile("proguard-android-optimize.txt"), "proguard-rules.pro"
        }
    }

    dependencies {
        implementation ('com.google.android.play:feature-delivery:2.1.0') {
            exclude group: 'com.google.android.play', module: 'core'
        }
        implementation 'com.google.android.play:review:2.0.2' // Play Review dependency
        implementation 'com.google.android.play:app-update:2.1.0'
    }
}

flutter {
    source = "../.."
}
